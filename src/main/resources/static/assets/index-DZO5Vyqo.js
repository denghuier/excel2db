import{d as j,a as _,r as f,l as T,f as e,w as t,i as s,x as A,F as x,b as d,e as N,g,h as G,v as H,k as J,m as K,E as z,c as Q,_ as X}from"./index-DUUratVh.js";import{c as Y,l as Z,d as ee,u as le}from"./datasource-Dd-vCrLU.js";import"./request-B8tej4z5.js";const ae={class:"dialog-footer"},m="auto",te=j({__name:"index",setup(oe){const b=_({pageNum:1,pageSize:10,dsName:"",dbType:[],host:"",port:"",database:"",userName:"",password:"",linkParams:""});var o=f({id:"",dsName:"",dbType:[],database:"",host:"",port:"",userName:"",password:"",linkParams:""}),V=f(""),k=_([]);const w=_([]),y=f(0);(()=>{Y().then(n=>{w.value=n.data})})();const c=()=>{Z(b).then(n=>{k.value=_(n.rows),y.value=n.total})};c();const C=(n,l)=>{b.pageNum=n,c()};var u=f(!1);const U=f(!1),h=()=>{o.id==""?ee(o.value).then(n=>{u.value=!1,z.success("添加成功"),c()}):le(o.value).then(n=>{u.value=!1,z.success("修改成功"),c()})},P=()=>{o=_({}),u.value=!0,V.value="添加数据源"},D=n=>{u.value=!0,o.value={id:n.id,dsName:n.dsName,dbType:n.dbType,database:n.database,host:n.host,port:n.port,userName:n.userName,password:n.password,linkParams:n.linkParams},V.value="修改数据源"};return(n,l)=>{const L=d("Plus"),B=d("el-icon"),v=d("el-button"),i=d("el-table-column"),F=d("el-table"),S=d("el-col"),E=d("el-row"),R=d("el-pagination"),q=d("el-main"),I=d("el-container"),r=d("el-input"),p=d("el-form-item"),M=d("el-option"),O=d("el-select"),W=d("el-form"),$=d("el-dialog");return N(),T(x,null,[e(I,{direction:"vertical",style:{width:"100%",height:"100%","background-color":"#ffffff"}},{default:t(()=>[e(q,null,{default:t(()=>[e(E,null,{default:t(()=>[e(S,{span:24},{default:t(()=>[e(v,{type:"primary",size:"small",onClick:P},{default:t(()=>[e(B,null,{default:t(()=>[e(L)]),_:1}),l[10]||(l[10]=g("添加"))]),_:1}),e(F,{data:s(k).value,style:{width:"100%"}},{default:t(()=>[e(i,{prop:"id",label:"序号",align:"center"}),e(i,{prop:"dsName",label:"数据源名称"}),e(i,{prop:"dbType",label:"数据源类型"}),e(i,{prop:"host",label:"host","min-width":"100px"}),e(i,{prop:"port",label:"端口"}),e(i,{prop:"userName",label:"用户"}),e(i,{label:"操作"},{default:t(a=>[e(v,{type:"primary",size:"small",onClick:ne=>D(a.row)},{default:t(()=>l[11]||(l[11]=[g("编辑")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),G(e(R,{background:"",layout:"prev, pager, next",size:"small",total:y.value,"default-page-size":b.pageNum,"page-size":b.pageSize,onChange:C,class:"pagination"},null,8,["total","default-page-size","page-size"]),[[H,y.value>0]])]),_:1})]),_:1}),e($,{modelValue:s(u),"onUpdate:modelValue":l[9]||(l[9]=a=>A(u)?u.value=a:u=a),title:s(V),width:"500","modal-append-to-body":"","append-to-body":!0},{footer:t(()=>[J("div",ae,[e(v,{onClick:l[8]||(l[8]=a=>U.value=!1)},{default:t(()=>l[12]||(l[12]=[g("取消")])),_:1}),e(v,{type:"primary",onClick:h},{default:t(()=>l[13]||(l[13]=[g(" 提交 ")])),_:1})])]),default:t(()=>[e(W,{model:s(o)},{default:t(()=>[e(p,{label:"名称","label-width":m},{default:t(()=>[e(r,{modelValue:s(o).dsName,"onUpdate:modelValue":l[0]||(l[0]=a=>s(o).dsName=a)},null,8,["modelValue"])]),_:1}),e(p,{label:"类型","label-width":m},{default:t(()=>[e(O,{modelValue:s(o).dbType,"onUpdate:modelValue":l[1]||(l[1]=a=>s(o).dbType=a),placeholder:"请选择类型"},{default:t(()=>[(N(!0),T(x,null,K(w.value,a=>(N(),Q(M,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"host","label-width":m},{default:t(()=>[e(r,{modelValue:s(o).host,"onUpdate:modelValue":l[2]||(l[2]=a=>s(o).host=a)},null,8,["modelValue"])]),_:1}),e(p,{label:"端口","label-width":m},{default:t(()=>[e(r,{modelValue:s(o).port,"onUpdate:modelValue":l[3]||(l[3]=a=>s(o).port=a)},null,8,["modelValue"])]),_:1}),e(p,{label:"账号","label-width":m},{default:t(()=>[e(r,{modelValue:s(o).userName,"onUpdate:modelValue":l[4]||(l[4]=a=>s(o).userName=a)},null,8,["modelValue"])]),_:1}),e(p,{label:"密码","label-width":m},{default:t(()=>[e(r,{modelValue:s(o).password,"onUpdate:modelValue":l[5]||(l[5]=a=>s(o).password=a)},null,8,["modelValue"])]),_:1}),e(p,{label:"数据库","label-width":m},{default:t(()=>[e(r,{modelValue:s(o).database,"onUpdate:modelValue":l[6]||(l[6]=a=>s(o).database=a)},null,8,["modelValue"])]),_:1}),e(p,{label:"URL","label-width":m},{default:t(()=>[e(r,{modelValue:s(o).linkParams,"onUpdate:modelValue":l[7]||(l[7]=a=>s(o).linkParams=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}}),me=X(te,[["__scopeId","data-v-1ffc7a61"]]);export{me as default};
